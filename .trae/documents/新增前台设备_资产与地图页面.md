## 目标
- 增加一个“前台”功能模块，包含两个页面：
  - 设备与资产表格页：展示实体基本属性与最新数值，可查看图表。
  - 地图页：展示设备与资产的地理坐标与状态。
- 前台模块在侧边菜单可见，并可跳转回现有实体列表等原有导航。

## 路由与菜单
- 新增路由模块 `src/router/routes/modules/portal.ts`，父级 `component: LAYOUT`，`path: '/portal'`，`meta.title: '前台'`，`icon: 'ant-design:deployment-unit-outlined'`，`authority: [TENANT_ADMIN, CUSTOMER_USER]`。
- 子路由：
  - `/portal/entities`：设备与资产表格页。
  - `/portal/map`：地图页。
- 按现有风格为菜单配置 `tabIcon`、`orderNo`、`single` 等（参考 `src/router/routes/modules/tb.ts:104-140, 142-191`）。

## 页面：设备与资产表格
- 目录：`src/views/portal/entities/index.vue`。
- 组件与模式：使用内置表格 `BasicTable` 与 `useTable`（参考 `src/components/Table/src/BasicTable.vue` 与入口 `src/components/Table/index.ts`）。
- 顶部切换与过滤：
  - Segment 切换“设备 / 资产”。
  - 关键字搜索、类型筛选，默认按 `createdTime DESC` 排序。
- 列与数据：
  - 基本字段：`name`、`type`、`label`、`active`（属性）、`lastActivityTime`（属性）。
  - 坐标：优先取 `latitude/longitude`（时序），若无则回退资产/设备属性坐标键（可通过配置）。
  - 操作列：查看图表、跳转到原有列表页（`/device/list` 或 `/asset/list`）。
- 图表查看：
  - 点击“查看图表”打开 Drawer。
  - 先拉取可用时序键 `getTimeseriesKeys(entityId)`，用户勾选后用 `getTimeseries` 查询时窗数据，使用 `useECharts` 绘制（参考 `src/hooks/web/useECharts.ts` 与 `src/utils/lib/echarts.ts`）。

## 页面：地图
- 目录：`src/views/portal/map/index.vue`。
- 地图库：复用已集成的百度地图 WebGL（`BMapGL`）。
- 加载方式：使用 `useBMap(import.meta.env.VITE_BAIDU_MAP_AK)`（参考 `src/hooks/web/useBMap.ts:3-41`），避免硬编码 AK。
- 数据来源：
  - WebSocket 优先：`WsCmdType.ENTITY_DATA` 订阅最新值（经纬度、在线状态、活动时间、名称等），失败回退 HTTP（参考 `src/views/tb/desktop/components/chart/GeoMap.vue:73-121, 152-168`）。
  - 支持设备与资产切换（两类 `entityFilter`）。
- 展示：
  - Marker + InfoWindow：名称、标签、在线状态、最后活动时间。
  - 资源较多时可加聚合（后续增强）。
- 快捷跳转：按钮“前往设备列表”“前往资产列表”链接至现有页面（参考 `src/router/routes/modules/tb.ts:155-166, 167-177`）。

## 数据接口
- 设备：`src/api/tb/device.ts`（列表、详情、凭证、类型）。
  - 例：租户设备列表 `getTenantDeviceInfoList(params)`（`src/api/tb/device.ts:125-130`）。
- 资产：`src/api/tb/asset.ts`（列表、详情、类型）。
  - 例：租户资产列表 `getTenantAssetInfoList(params)`（`src/api/tb/asset.ts:100-105`）。
- 遥测/属性：`src/api/tb/telemetry.ts`。
  - 最新遥测：`getLatestTimeseries(entityId, keys?)`（`src/api/tb/telemetry.ts:82-88`）。
  - 历史遥测：`getTimeseries(params)`（`src/api/tb/telemetry.ts:90-95`）。
  - 属性：`getAttributesByScope(entityId, scope)`（`src/api/tb/telemetry.ts:75-80`）。

## 图表与地图实现
- 图表：
  - 统一用 `useECharts` 初始化与自适应，序列为所选时序键的 `TsKvEntity[key].data`（参考 `src/views/tb/telemetry/timeseriesChart.vue`）。
- 地图：
  - 抽取 `GeoMap` 逻辑复用，修正 `longitude` 取值（`GeoMap.vue:161-165, 174`）并参数化实体类型与键名。

## 权限与导航
- `meta.authority: [TENANT_ADMIN, CUSTOMER_USER]`，与现有实体页一致（参考 `tb.ts:146-165, 168-177`）。
- 在前台页提供返回原有导航的入口：
  - 表格操作列跳转 `/device/list`、`/asset/list`。
  - 地图页顶部按钮跳转上述列表路由。

## 文案与样式
- 菜单与页标题使用 i18n：在 `src/locales/lang/zh-CN/routes/portal.ts` 与英文包添加键，如 `routes.portal.front`, `routes.portal.entities`, `routes.portal.map`。
- 表格列标题、按钮文案复用现有风格与组件（`ant-design-vue`）。

## 验证与交付
- 路由出现在侧栏菜单，点击进入两页面。
- 表格按“设备/资产”切换，能加载列表，支持搜索、排序；图表 Drawer 能显示选中键的历史曲线。
- 地图加载成功（需要配置 `VITE_BAIDU_MAP_AK`），设备/资产 Marker 正确显示坐标、状态与信息窗口；跳转按钮正常导航到原有列表。

## 变更清单
- 新增：
  - `src/router/routes/modules/portal.ts`（前台模块路由）。
  - `src/views/portal/entities/index.vue`（设备与资产表格页）。
  - `src/views/portal/map/index.vue`（地图页）。
  - `src/locales/lang/zh-CN/routes/portal.ts`、`src/locales/lang/en/routes/portal.ts`（文案）。
- 更新（如需）：
  - `src/views/tb/desktop/components/chart/GeoMap.vue`（抽取/复用与小修正）。
  - `.env*` 增加 `VITE_BAIDU_MAP_AK`。

## 后续可选增强
- Marker 聚合与热力图。
- 图表页支持实时订阅与阈值告警提示。
- 自定义列配置与导出。
- 支持资产与设备的关联过滤（按监测站展示资产-设备树）。